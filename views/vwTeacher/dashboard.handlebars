{{!-- vwTeacher/dashboard.handlebars --}}

<div class="container my-5">
  <h2 class="mb-4 text-center text-primary fw-bold">Dashboard Giảng Viên</h2>

  <div class="d-flex justify-content-end mb-3">
    <a href="/teacher/course/add" class="btn btn-success">
      <i class="bi bi-plus-circle"></i> Đăng Khóa Học Mới
    </a>
  </div>

  {{#if courses.length}}
  <table class="table table-striped table-hover shadow-sm">
    <thead class="table-primary">
      <tr>
        <th>#</th>
        <th>Khóa học</th>
        <th>Trạng thái</th>
        <th>Lượt học</th>
        <th class="text-center">Hành động</th>
      </tr>
    </thead>
    <tbody>
      {{#each courses}}
      <tr>
        <td>{{add @index 1}}</td>
        <td>
          <a href="/teacher/course/{{id}}" class="fw-semibold text-decoration-none text-dark">
            {{title}}
          </a>
        </td>
        <td class="text-center">
  <form action="/teacher/course/{{id}}/toggle-status" method="POST">
    <select name="status" class="form-select form-select-sm" onchange="this.form.submit()">
      <option value="draft" {{#ifEquals status "draft"}}selected{{/ifEquals}}>Draft</option>
      <option value="completed" {{#ifEquals status "completed"}}selected{{/ifEquals}}>Completed</option>
      <option value="published" {{#ifEquals status "published"}}selected{{/ifEquals}}>Published</option>
    </select>
  </form>
</td>
        <td>{{students}}</td>
        <td class="text-center">
          <a href="/teacher/course/{{id}}/detail" class="btn btn-info btn-sm">Chi tiết</a>
          <a href="/teacher/course/{{id}}/edit" class="btn btn-warning btn-sm">Sửa</a>
          <form method="POST" action="/teacher/course/{{id}}/delete" style="display: inline;" onsubmit="return confirm('Bạn có chắc muốn xóa khóa học này?');">
            <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
          </form>
        </td>
      </tr>
      {{/each}}
    </tbody>
  </table>
  {{else}}
  <div class="alert alert-info text-center mt-4" role="alert">
    Bạn chưa đăng khóa học nào.  
    <a href="/teacher/course/add" class="alert-link">Tạo ngay!</a>
  </div>
  {{/if}}
</div>
