<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
  <h1 class="h2">{{title}}</h1>
  <div class="btn-toolbar mb-2 mb-md-0">
    <a href="/admin/courses/{{course.id}}/edit" class="btn btn-sm btn-primary me-2">
      <i class="bi bi-pencil"></i> Edit
    </a>
    <a href="/admin/courses" class="btn btn-sm btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Back
    </a>
  </div>
</div>

{{#if error}}
<div class="alert alert-warning alert-dismissible fade show" role="alert">
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  <strong>Error:</strong> An error has occurred. Please try again.
</div>
{{/if}}

{{#if success}}
<div class="alert alert-success alert-dismissible fade show" role="alert">
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  <strong>Success:</strong> The operation has been completed successfully.
</div>
{{/if}}

<div class="row">
  <div class="col-md-8">
    <!-- Basic Information -->
    <div class="card mb-4">
      <div class="card-header">
        <h5 class="card-title mb-0">Course Information</h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>ID:</strong> {{course.id}}</p>
            <p><strong>Title:</strong> {{course.title}}</p>
            <p><strong>Short Description:</strong> {{course.short_description}}</p>
            <p><strong>Instructor:</strong> {{course.instructor_name}}</p>
          </div>
          <div class="col-md-6">
            <p><strong>Category:</strong> {{course.category_name}}</p>
            <p><strong>Price:</strong> {{formatCurrency course.price}}</p>
            <p><strong>Promotional Price:</strong> {{#if course.promotional_price}}{{formatCurrency
              course.promotional_price}}{{else}}None{{/if}}</p>
            <p><strong>Status:</strong>
              <span class="badge bg-{{getStatusBadge course.status}}">
                {{getStatusText course.status}}
              </span>
            </p>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-12">
            <p><strong>Detailed Description:</strong></p>
            <div class="border p-3 bg-light">
              {{{course.detailed_description}}}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Chapters and Lectures List -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0">Course Content</h5>
        <span class="badge bg-primary">{{course.chapters.length}} chapters</span>
      </div>
      <div class="card-body">
        {{#each course.chapters}}
        <div class="chapter-item mb-4">
          <h6 class="chapter-title">
            <i class="bi bi-folder me-2"></i>
            Chapter {{chapter_order}}: {{title}}
          </h6>
          <div class="lectures-list ms-4 mt-2">
            {{#each lectures}}
            <div class="lecture-item d-flex justify-content-between align-items-center py-2 border-bottom">
              <div>
                <i class="bi bi-play-circle me-2"></i>
                Lecture {{lecture_order}}: {{title}}
                {{#if is_preview_allowed}}
                <span class="badge bg-success ms-2">Preview</span>
                {{/if}}
              </div>
              <small class="text-muted">{{duration_minutes}} minutes</small>
            </div>
            {{/each}}
          </div>
        </div>
        {{else}}
        <p class="text-muted">No course content available</p>
        {{/each}}
      </div>
    </div>

    <!-- Reviews -->
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">Reviews ({{course.reviews.length}})</h5>
      </div>
      <div class="card-body">
        {{#each course.reviews}}
        <div class="review-item border-bottom pb-3 mb-3">
          <div class="d-flex justify-content-between">
            <strong>{{full_name}}</strong>
            <div>
              {{#stars rating}}{{/stars}}
              <small class="text-muted ms-2">{{formatDate created_at}}</small>
            </div>
          </div>
          <p class="mb-0 mt-2">{{comment}}</p>
        </div>
        {{else}}
        <p class="text-muted">No reviews yet</p>
        {{/each}}
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <!-- Statistics -->
    <div class="card mb-4">
      <div class="card-header">
        <h5 class="card-title mb-0">Statistics</h5>
      </div>
      <div class="card-body">
        <p><strong>Enrollments:</strong> {{course.enrollment_count}}</p>
        <p><strong>Views:</strong> {{course.views}}</p>
        <p><strong>Last Updated:</strong> {{formatDate course.last_updated}}</p>
        <p><strong>Created Date:</strong> {{formatDate course.created_at}}</p>
      </div>
    </div>

    <!-- Course Image -->
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">Course Image</h5>
      </div>
      <div class="card-body text-center">
        {{#if course.image_url}}
        <img src="{{course.image_url}}" alt="{{course.title}}" class="img-fluid rounded" style="max-height: 200px;"
          onerror="this.onerror=null; this.src='https://via.placeholder.com/300x200?text=No+Image';">
        {{else}}
        <img src="https://via.placeholder.com/300x200?text=No+Image" alt="No Image" class="img-fluid rounded"
          style="max-height: 200px;">
        {{/if}}
      </div>
    </div>
  </div>
</div>