<div class="d-flex justify-content-between align-items-center pb-3 mb-4 border-bottom">
  <h1 class="h3 fw-bold">Course Management</h1>
  <a href="/admin/courses/create" class="btn btn-primary d-flex align-items-center gap-1">
    <i class="bi bi-plus-lg"></i>
    Add Course
  </a>
</div>

{{#if error}}
<div class="alert alert-danger alert-dismissible fade show" role="alert">
  <strong>Error:</strong> An error has occurred. Please try again.
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{{/if}}

{{#if success}}
<div class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>Success:</strong> The operation has been completed successfully.
  <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
{{/if}}

<div class="card shadow-sm">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-dark text-center">
          <tr>
            <th style="width: 60px;">ID</th>
            <th>Course Name</th>
            <th>Category</th>
            <th style="width: 130px;">Status</th>
            <th style="width: 200px;">Actions</th>
          </tr>
        </thead>

        <tbody>
          {{#each courses}}
          <tr>
            <td class="text-center fw-semibold">{{id}}</td>
            <td class="fw-semibold">{{title}}</td>
            <td>{{category_name}}</td>

            <td class="text-center">
              <span class="badge px-3 py-2 rounded-pill bg-{{getStatusBadge status}}">
                {{getStatusText status}}
              </span>
            </td>

            <td class="text-center">
              <div class="d-flex justify-content-center gap-2">
                <a href="/admin/courses/{{id}}" class="btn btn-sm btn-outline-primary d-flex align-items-center gap-1">
                  <i class="bi bi-eye"></i>
                  View
                </a>
                <a href="/admin/courses/{{id}}/edit"
                  class="btn btn-sm btn-warning d-flex align-items-center gap-1 text-white">
                  <i class="bi bi-pencil"></i>
                  Edit
                </a>
                <form method="post" action="/admin/courses/delete" class="frmDeleteCourse d-inline"
                  data-course-title="{{title}}">
                  <input type="hidden" name="id" value="{{id}}">
                  <button type="submit" class="btn btn-sm btn-danger d-flex align-items-center gap-1">
                    <i class="bi bi-trash"></i>
                    Delete
                  </button>
                </form>
              </div>
            </td>
          </tr>
          {{/each}}
        </tbody>

      </table>
    </div>
  </div>
</div>

<script>
  document.querySelectorAll('.frmDeleteCourse').forEach(form => {
    form.addEventListener('submit', function (e) {
      const courseTitle = this.dataset.courseTitle;
      if (!confirm(`Are you sure you want to delete the course "${courseTitle}"?`)) {
        e.preventDefault();
      }
    });
  });
</script>