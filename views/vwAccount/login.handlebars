<link rel="stylesheet" href="/static/css/auth.css">

<div class="auth-wrapper">
    <div class="container">
        <div class="auth-card">
            <div class="auth-logo">
                <h2>Login</h2>
                <p>Welcome back!</p>
            </div>

            {{#if error}}
            <div class="alert alert-danger alert-custom" role="alert">
                <i class="bi bi-exclamation-circle"></i> {{error}}
            </div>
            {{/if}}

            {{#if success}}
            <div class="alert alert-success alert-custom" role="alert">
                <i class="bi bi-check-circle"></i> {{success}}
            </div>
            {{/if}}

            <form method="post" action="/account/login" class="auth-form" id="loginForm">
                <div class="mb-3">
                    <label class="form-label" for="email">
                        <i class="bi bi-envelope"></i> Email
                    </label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="example@email.com"
                        required autofocus>
                </div>

                <div class="mb-3">
                    <label class="form-label" for="password">
                        <i class="bi bi-lock"></i> Password
                    </label>
                    <div class="password-toggle">
                        <input type="password" class="form-control" id="password" name="password"
                            placeholder="Enter your password" required>
                        <i class="bi bi-eye toggle-icon" id="togglePassword"></i>
                    </div>
                </div>

                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="remember" name="remember">
                        <label class="form-check-label small" for="remember">
                            Remember me
                        </label>
                    </div>
                    <a href="/account/forgot-password" class="small text-decoration-none">
                        Forgot password?
                    </a>
                </div>

                <button type="submit" class="btn btn-primary" id="btnSubmit">
                    <i class="bi bi-box-arrow-in-right"></i> Login
                </button>
            </form>

            <div class="auth-divider">
                <span>or</span>
            </div>

            <div class="social-login">
                <button type="button" class="btn-google" onclick="alert('Feature under development')">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4"
                            d="M16.51 8H8.98v3h4.3c-.18 1-.74 1.48-1.6 2.04v2.01h2.6a7.8 7.8 0 0 0 2.38-5.88c0-.57-.05-.66-.15-1.18z" />
                        <path fill="#34A853"
                            d="M8.98 17c2.16 0 3.97-.72 5.3-1.94l-2.6-2a4.8 4.8 0 0 1-7.18-2.54H1.83v2.07A8 8 0 0 0 8.98 17z" />
                        <path fill="#FBBC05"
                            d="M4.5 10.52a4.8 4.8 0 0 1 0-3.04V5.41H1.83a8 8 0 0 0 0 7.18l2.67-2.07z" />
                        <path fill="#EA4335"
                            d="M8.98 4.18c1.17 0 2.23.4 3.06 1.2l2.3-2.3A8 8 0 0 0 1.83 5.4L4.5 7.49a4.77 4.77 0 0 1 4.48-3.3z" />
                    </svg>
                    Google
                </button>
                <button type="button" class="btn-facebook" onclick="alert('Feature under development')">
                    <i class="bi bi-facebook"></i>
                    Facebook
                </button>
            </div>

            <div class="auth-footer">
                Don't have an account? <a href="/account/register">Register now</a>
            </div>
        </div>
    </div>
</div>

<script>
    // Toggle password visibility
    document.getElementById('togglePassword')?.addEventListener('click', function () {
        const input = document.getElementById('password');
        const icon = this;
        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('bi-eye');
            icon.classList.add('bi-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.remove('bi-eye-slash');
            icon.classList.add('bi-eye');
        }
    });

    // Form submit with loading
    document.getElementById('loginForm')?.addEventListener('submit', function (e) {
        const btn = document.getElementById('btnSubmit');
        const form = this;

        if (!form.checkValidity()) {
            e.preventDefault();
            form.classList.add('was-validated');
            return false;
        }

        btn.disabled = true;
        btn.classList.add('btn-loading');
        btn.innerHTML = '<i class="bi bi-hourglass-split"></i> Logging in...';
    });
</script>
